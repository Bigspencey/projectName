(function(n,g){var z="",y="?",t="function",j="undefined",e="object",f="major",u="model",h="name",q="type",m="vendor",w="version",a="architecture",k="console",s="mobile",x="tablet",p="smarttv";var b={has:function(B,A){return A.toLowerCase().indexOf(B.toLowerCase())!==-1},lowerize:function(A){return A.toLowerCase()}};var v={rgx:function(){for(var K,E=0,D,C,B,A,F,G,H=arguments;E<H.length;E+=2){var J=H[E],I=H[E+1];if(typeof K===j){K={};for(B in I){A=I[B];if(typeof A===e){K[A[0]]=g}else{K[A]=g}}}for(D=C=0;D<J.length;D++){F=J[D].exec(this.getUA());if(!!F){for(B=0;B<I.length;B++){G=F[++C];A=I[B];if(typeof A===e&&A.length>0){if(A.length==2){if(typeof A[1]==t){K[A[0]]=A[1].call(this,G)}else{K[A[0]]=A[1]}}else{if(A.length==3){if(typeof A[1]===t&&!(A[1].exec&&A[1].test)){K[A[0]]=G?A[1].call(this,G,A[2]):g}else{K[A[0]]=G?G.replace(A[1],A[2]):g}}else{if(A.length==4){K[A[0]]=G?A[3].call(this,G.replace(A[1],A[2])):g}}}}else{K[A]=G?G:g}}break}}if(!!F){break}}return K},str:function(D,C){for(var B in C){if(typeof C[B]===e&&C[B].length>0){for(var A=0;A<C[B].length;A++){if(b.has(C[B][A],D)){return B===y?g:B}}}else{if(b.has(C[B],D)){return B===y?g:B}}}return D}};var r={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}};var o={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[h,w,f],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[h,"Opera"],w,f],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[h,w,f],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[h,"IE"],w,f],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[h,"Yandex"],w,f],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[h,/_/g," "],w,f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[h,w,f],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[h,"Dolphin"],w,f],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[h,"Chrome"],w,f],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[w,f,[h,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[w,f,h],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[h,[f,v.str,r.browser.oldsafari.major],[w,v.str,r.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[h,w,f],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[h,"Netscape"],w,f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[h,w,f],[/(apple(?:coremedia|))\/((\d+)[\w\._]+)/i,/(coremedia) v((\d+)[\w\._]+)/i],[h,w,f],[/(aqualung|lyssna|bsplayer)\/([\w\.-]+)/i],[h,w],[/(ares|ossproxy)\s((\d+)[\w\.-]+)/i],[h,w,f],[/(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\/((\d+)[\w\.-]+)/i,/(clementine|music player daemon)\s((\d+)[\w\.-]+)/i,/(lg player|nexplayer)\s((\d+)[\d\.]+)/i,/player\/(nexplayer|lg player)\s((\d+)[\w\.-]+)/i],[h,w,f],[/(nexplayer)\s((\d+)[\w\.-]+)/i],[h,w,f],[/(flrp)\/((\d+)[\w\.-]+)/i],[[h,"Flip Player"],w,f],[/(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i],[h],[/(gstreamer) souphttpsrc (?:\([^\)]+\)){0,1} libsoup\/((\d+)[\w\.-]+)/i],[h,w,f],[/(htc streaming player)\s[\w_]+\s\/\s((\d+)[\d\.]+)/i,/(java|python-urllib|python-requests|wget|libcurl)\/((\d+)[\w\.-_]+)/i,/(lavf)((\d+)[\d\.]+)/i],[h,w,f],[/(htc_one_s)\/((\d+)[\d\.]+)/i],[[h,/_/g," "],w,f],[/(mplayer)(?:\s|\/)(?:(?:sherpya-){0,1}svn)(?:-|\s)(r\d+(?:-\d+[\w\.-]+){0,1})/i],[h,w],[/(mplayer)(?:\s|\/)((\d+)[\w\.-]+)/i,/(mplayer) unknown-((\d+)[\w\.\-]+)/i],[h,w,f],[/(mplayer)/i,/(yourmuze)/i,/(media player classic|nero showtime)/i],[h],[/(nero (?:home|scout))\/((\d+)[\w\.-]+)/i],[h,w,f],[/(nokia\d+)\/((\d+)[\w\.-]+)/i],[h,w,f],[/\s(songbird)\/((\d+)[\w\.-]+)/i],[h,w,f],[/(winamp)3 version ((\d+)[\w\.-]+)/i,/(winamp)\s((\d+)[\w\.-]+)/i,/(winamp)mpeg\/((\d+)[\w\.-]+)/i],[h,w,f],[/(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i],[h],[/(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\/((\d+)[\w\.-]+)/i],[h,w,f],[/(smp)((\d+)[\d\.]+)/i],[h,w,f],[/(vlc) media player - version ((\d+)[\w\.]+)/i,/(vlc)\/((\d+)[\w\.-]+)/i,/(xbmc|gvfs|xine|xmms|irapp)\/((\d+)[\w\.-]+)/i,/(foobar2000)\/((\d+)[\d\.]+)/i,/(itunes)\/((\d+)[\d\.]+)/i],[h,w,f],[/(wmplayer)\/((\d+)[\w\.-]+)/i,/(windows-media-player)\/((\d+)[\w\.-]+)/i],[[h,/-/g," "],w,f],[/windows\/((\d+)[\w\.-]+) upnp\/[\d\.]+ dlnadoc\/[\d\.]+ (home media server)/i],[w,f,[h,"Windows"]],[/(com\.riseupradioalarm)\/((\d+)[\d\.]*)/i],[h,w,f],[/(rad.io)\s((\d+)[\d\.]+)/i,/(radio.(?:de|at|fr))\s((\d+)[\d\.]+)/i],[[h,"rad.io"],w,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[a,"amd64"]],[/(ia32(?=;))/i],[[a,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[a,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[a,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[a,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[a,"sparc"]],[/(ia64(?=;)|68k(?=\))|arm(?=v\d+;)|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[a,b.lowerize]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[u,m,[q,x]],[/applecoremedia\/[\w\.]+ \((ipad)/],[u,[m,"Apple"],[q,x]],[/(apple\s{0,1}tv)/i],[[u,"Apple TV"],[m,"Apple"]],[/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[m,u,[q,x]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[u,m,[q,s]],[/\((ip[honed|\s\w*]+);/i],[u,[m,"Apple"],[q,s]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[m,u,[q,s]],[/\((bb10);\s(\w+)/i],[[m,"BlackBerry"],u,[q,s]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i],[[m,"Asus"],u,[q,x]],[/(sony)\s(tablet\s[ps])/i],[m,u,[q,x]],[/(nintendo)\s([wids3u]+)/i],[m,u,[q,k]],[/((playstation)\s[3portablevi]+)/i],[[m,"Sony"],u,[q,k]],[/(sprint\s(\w+))/i],[[m,v.str,r.device.sprint.vendor],[u,v.str,r.device.sprint.model],[q,s]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[m,[u,/_/g," "],[q,s]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[m,"Motorola"],u,[q,s]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[[m,"Motorola"],u,[q,x]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i],[[m,"Samsung"],u,[q,x]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[m,"Samsung"],u,[q,s]],[/(sie)-(\w+)*/i],[[m,"Siemens"],u,[q,s]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[m,"Nokia"],u,[q,s]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[[m,"Acer"],u,[q,x]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[m,"LG"],u,[q,x]],[/((nexus\s[45]))/i,/(lg)[e;\s-\/]+(\w+)*/i],[[m,"LG"],u,[q,s]],[/android.+((ideatab[a-z0-9\-\s]+))/i],[[m,"Lenovo"],u,[q,x]],[/(lg) netcast\.tv/i],[m,[q,p]],[/(mobile|tablet);.+rv\:.+gecko\//i],[q,m,u]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[h,w],[/rv\:([\w\.]+).*(gecko)/i],[w,h]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[h,w],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[h,[w,v.str,r.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[h,"Windows"],[w,v.str,r.os.windows.version]],[/\((bb)(10);/i],[[h,"BlackBerry"],w],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[h,w],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[h,"Symbian"],w],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[h,"Firefox OS"],w],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[h,w],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[h,"Chromium OS"],w],[/(sunos)\s?([\w\.]+\d)*/i],[[h,"Solaris"],w],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[h,w],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[h,"iOS"],[w,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[h,[w,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[h,w]]};var l=function(A){var B=A||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:z);if(!(this instanceof l)){return new l(A).getResult()}this.getBrowser=function(){return v.rgx.apply(this,o.browser)};this.getCPU=function(){return v.rgx.apply(this,o.cpu)};this.getDevice=function(){return v.rgx.apply(this,o.device)};this.getEngine=function(){return v.rgx.apply(this,o.engine)};this.getOS=function(){return v.rgx.apply(this,o.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return B};this.setUA=function(C){B=C;return this};this.setUA(B)};if(typeof exports!==j){if(typeof module!==j&&module.exports){exports=module.exports=l}exports.UAParser=l}else{n.UAParser=l;if(typeof define===t&&define.amd){define(function(){return l})}if(typeof n.jQuery!==j){var d=n.jQuery;var c=new l;d.ua=c.getResult();d.ua.get=function(){return c.getUA()};d.ua.set=function(B){c.setUA(B);var A=c.getResult();for(var C in A){d.ua[C]=A[C]}}}}})(this);var DnaUOL=DnaUOL||{};DnaUOL.Config=new function(){var a={appDomain:"dna.uol.com.br",appKey:"DNA",logLevel:["error","warning","debug"],updateFrequency:30,maxUpdateFrequency:365,cookieValueSeparator:"|",uidServicePath:"/service/sample",simpleRequestServicePath:"/service/sample/conn",logPath:"/service/logger",cookieServicePath:"/service/cookie",etagServicePath:"/service/etag",jQSource:"/js/jquery1.7.2.min.js",wrapperID:"dna-uol-wrapper",whiteString:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",asyncInterval:100,maxAsyncAttempts:10};DnaUOL.appDomain=a.appDomain;DnaUOL.appUrl=(window.location.protocol+"//"+a.appDomain);this.get=function(b){return(typeof a[b]!="undefined"?a[b]:null)}};var DnaUOL=DnaUOL||{};DnaUOL.Log=new function(){var d,a=[];var g=function(m,l,k){if(typeof a[m]!="undefined"){a[m].push({info:String(l),message:String(k)})}};var j=function(){var k=new Date();var l=String(k.getDate()+"/"+k.getMonth()+"/"+k.getFullYear()+" "+k.getHours()+":"+k.getMinutes()+":"+k.getSeconds());return l};var c=function(){var k={date:j(),userAgent:DnaUOL.browser.name,data:a};return k};var e=function(){var p=c();var u=[];u.push("{");u.push('\n\t date: "'+p.date+'",');u.push('\n\t userAgent: "'+p.userAgent+'",');u.push("\n\t data: {\n");var k=[];for(var q in p.data){var t=[];for(var s in p.data[q]){var m=DnaUOL.Helpers.trim(String(p.data[q][s].info));var v=DnaUOL.Helpers.trim(String(p.data[q][s].message));var o="\t\t\t";o+=(s+": {");o+=('\n\t\t\t\t info: "'+m+'",');o+=('\n\t\t\t\t message: "'+v+'"');o+=("\n\t\t\t}");t.push(o)}var l=("\t\t"+q+"s:{\n");var r=" ";if(p.data[q].length>0){r=t.join(",\n")}var n=("\n\t\t}");k.push(l+r+n)}u.push(k.join(", \n"));u.push("\n\t}\n}\n");return u.join("")};var h=function(){for(var k in a.error){if(a.error[k].message){return true}}return false};var f=function(l){var k=(DnaUOL.appUrl+DnaUOL.Config.get("logPath"));DnaUOL.HttpConnection.post({url:k,data:l,dataType:"text",error:function(m){b(m)}})};var b=function(m){var k=(DnaUOL.appUrl+DnaUOL.Config.get("logPath"));var l=new Image();l.src=String(k+"?error="+String(m))};this.begin=function(l){d=(typeof l==="object"?l:["error","warning","debug"]);for(var k in d){a[d[k]]=[]}};this.commit=function(){if(h()){try{var k=e();f(k)}catch(l){b(l)}}};this.getData=function(){return e()};this.error=function(l,k){g("error",l,k)};this.warning=function(l,k){g("warning",l,k)};this.debug=function(l,k){g("debug",l,k)}};var DnaUOL=DnaUOL||{};DnaUOL.Helpers=new function(){var a=DnaUOL.Config.get("whiteString");var b=DnaUOL.Config.get("jQSource");this.hasJQuery=function(){return(typeof jQuery!="undefined")};this.jQuerySupport=function(){if(!this.hasJQuery()){try{var d=document.getElementsByTagName("head")[0];var c=document.createElement("script");c.type="text/javascript";c.src=DnaUOL.appUrl+b;d.appendChild(c);DnaUOL.Log.debug("DnaUOL.Helpers.jQuerySupport","Loading jQuery...")}catch(f){DnaUOL.Log.error("DnaUOL.Helpers.jQuerySupport",f)}}};this.getHtmlWrapper=function(){var f=false;try{var c=DnaUOL.Config.get("wrapperID");if(document.getElementById(c)!=null){f=document.getElementById(c)}else{var f=document.createElement("div");f.id=c;f.style.width="1px";f.style.height="1px";f.style.position="absolute";f.style.top="1px";f.style.left="1px";f.style.overflow="hidden";document.body.appendChild(f)}}catch(d){DnaUOL.Log.error("DnaUOL.Helpers.getHtmlWrapper",d)}return f};this.removeHtmlWrapper=function(){var c=false;try{jQuery(this.getHtmlWrapper()).remove();c=true}catch(d){DnaUOL.Log.error(d)}return c};this.removeHtmlElement=function(d){var c=false;try{if(typeof d==="string"){d=document.getElementById("id")}if(d){this.getHtmlWrapper().removeChild(d);c=true}}catch(f){DnaUOL.Log.error("DnaUOL.Helpers.removeHtmlElement",f)}return c};this.createHtmlElement=function(c,d){var g=false;try{if(typeof(d.id)==="string"&&document.getElementById(d.id)){g=document.getElementById(d.id)}else{g=document.createElement(c)}if(g){for(var f in d){if(f=="id"&&typeof(d[f])==="string"){g.id=d.id}else{if(f=="html"&&typeof(d[f])==="string"){g.innerHTML=d.id}else{g.setAttribute(f,d[f])}}}this.getHtmlWrapper().appendChild(g)}}catch(h){DnaUOL.Log.error("DnaUOL.Helpers.createHtmlElement",h)}return g};this.getBrowser=function(){var c={},f;try{f=(new UAParser()).getResult();c.alias=f.browser.name.toUpperCase();c["is"+f.browser.name]=true;c.version=f.browser.version;c.name=c.alias+" "+c.version}catch(d){DnaUOL.Log.error("DnaUOL.Helpers.getBrowser",d)}return c};this.flashSupport=function(){supported=false;try{if(DnaUOL.browser.isIE&&typeof ActiveXObject!="undefined"){supported=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}else{if(navigator.mimeTypes){supported=Boolean(navigator.mimeTypes["application/x-shockwave-flash"])}}}catch(c){DnaUOL.Log.debug("DnaUOL.Helpers.flashSupport","Navegador não suporta flash")}return supported};this.getCookie=function(e,c){var j=e.split(";");var d="";var g="";var h="";var f=false;for(i=0;i<j.length;i++){d=j[i].split("=");g=d[0].replace(/^\s+|\s+$/g,"");if(g==c){f=true;if(d.length>1){h=unescape(d[1].replace(/^\s+|\s+$/g,""))}return h;break}d=null;g=""}if(!f){return null}};this.trim=function(d){var c=d;try{c=jQuery.trim(d)}catch(f){DnaUOL.Log.error(f)}return c};this.setUrlParameter=function(k,g,j){var d="";try{if(k.indexOf("&"+g+"=")>-1||k.indexOf(g+"=")==0){var c=k.indexOf("&"+g+"=");if(c==-1){c=k.indexOf(g+"=")}var f=k.indexOf("&",c+1);var h;if(f!=-1){h=k.substr(0,c)+k.substr(f+(c?0:1))+"&"+g+"="+j}else{h=k.substr(0,c)+"&"+g+"="+j}return h}else{d=k+"&"+g+"="+j}}catch(l){DnaUOL.Log.error("DnaUOL.Helpers.setUrlParameter",l)}return d};this.getUrlParameter=function(j,h){var d="";if(typeof j==="string"&&typeof h==="string"){try{var l=h+"=";var f=j.split(/[;&]/);for(var g=0;g<f.length;g++){var m=f[g];while(m.charAt(0)==" "){m=m.substring(1,m.length)}if(m.indexOf(l)==0){return m.substring(l.length,m.length)}}}catch(k){DnaUOL.Log.error("DnaUOL.Helpers.getUrlParameter",k)}}return d};this.encode=function(f){var o="";if(typeof f==="string"){try{var n,l,j,m,k,h,g;var c=0;f=this.UTF8Encode(f);while(c<f.length){n=f.charCodeAt(c++);l=f.charCodeAt(c++);j=f.charCodeAt(c++);m=n>>2;k=((n&3)<<4)|(l>>4);h=((l&15)<<2)|(j>>6);g=j&63;if(isNaN(l)){h=g=64}else{if(isNaN(j)){g=64}}o+=(a.charAt(m)+a.charAt(k)+a.charAt(h)+a.charAt(g))}}catch(d){DnaUOL.Log.error("DnaUOL.Helpers.encode",d)}}return o};this.decode=function(f){var o="";if(typeof f==="string"){try{var n,l,j;var m,k,h,g;var c=0;f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<f.length){m=a.indexOf(f.charAt(c++));k=a.indexOf(f.charAt(c++));h=a.indexOf(f.charAt(c++));g=a.indexOf(f.charAt(c++));n=(m<<2)|(k>>4);l=((k&15)<<4)|(h>>2);j=((h&3)<<6)|g;o=o+String.fromCharCode(n);if(h!=64){o=o+String.fromCharCode(l)}if(g!=64){o=o+String.fromCharCode(j)}}o=this.UTF8Decode(o)}catch(d){DnaUOL.Log.error("DnaUOL.Helpers.decode",d)}}return o};this.UTF8Encode=function(f){var d="";if(typeof f==="string"){try{var f=f.replace(/\r\n/g,"\n");for(var j=0;j<f.length;j++){var h=f.charCodeAt(j);if(h<128){d+=String.fromCharCode(h)}else{if((h>127)&&(h<2048)){d+=String.fromCharCode((h>>6)|192);d+=String.fromCharCode((h&63)|128)}else{d+=String.fromCharCode((h>>12)|224);d+=String.fromCharCode(((h>>6)&63)|128);d+=String.fromCharCode((h&63)|128)}}}}catch(g){DnaUOL.Log.error("DnaUOL.Helpers.UTF8Encode",g)}}return d};this.UTF8Decode=function(g){var d="";if(typeof g==="string"){try{var f=0;var j=c1=c2=0;while(f<g.length){j=g.charCodeAt(f);if(j<128){d+=String.fromCharCode(j);f++}else{if((j>191)&&(j<224)){c2=g.charCodeAt(f+1);d+=String.fromCharCode(((j&31)<<6)|(c2&63));f+=2}else{c2=g.charCodeAt(f+1);c3=g.charCodeAt(f+2);d+=String.fromCharCode(((j&15)<<12)|((c2&63)<<6)|(c3&63));f+=3}}}}catch(h){DnaUOL.Log.error("DnaUOL.Helpers.UTF8Decode",h)}}return d};this.toHtmlEntities=function(h){var f=h;try{var d={"&":"&#38;","'":"&#39;",'"':"&#34;","<":"&#60;",">":"&#62;"," ":"&#160;","¡":"&#161;","¢":"&#162;","£":"&#163;","¤":"&#164;","¥":"&#165;","¦":"&#166;","§":"&#167;","¨":"&#168;","©":"&#169;","ª":"&#170;","«":"&#171;","¬":"&#172;","®":"&#174;","¯":"&#175;","°":"&#176;","±":"&#177;","²":"&#178;","³":"&#179;","´":"&#180;","µ":"&#181;","¶":"&#182;","·":"&#183;","¹":"&#185;","º":"&#186;","»":"&#187;","¼":"&#188;","½":"&#189;","¾":"&#190;","¿":"&#191;","×":"&#215;","÷":"&#247;","À":"&#192;","Á":"&#193;","Â":"&#194;","Ã":"&#195;","Ä":"&#196;","Å":"&#197;","Æ":"&#198;","Ç":"&#199;","È":"&#200;","É":"&#201;","Ê":"&#202;","Ë":"&#203;","Ì":"&#204;","Í":"&#205;","Î":"&#206;","Ï":"&#207;","Ð":"&#208;","Ñ":"&#209;","Ò":"&#210;","Ó":"&#211;","Ô":"&#212;","Õ":"&#213;","Ö":"&#214;","Ø":"&#216;","Ù":"&#217;","Ú":"&#218;","Û":"&#219;","Ü":"&#220;","Ý":"&#221;","Þ":"&#222;","ß":"&#223;","à":"&#224;","á":"&#225;","â":"&#226;","ã":"&#227;","ä":"&#228;","å":"&#229;","æ":"&#230;","ç":"&#231;","è":"&#232;","é":"&#233;","ê":"&#234;","ë":"&#235;","ì":"&#236;","í":"&#237;","î":"&#238;","ï":"&#239;","ð":"&#240;","ñ":"&#241;","ò":"&#242;","ó":"&#243;","ô":"&#244;","õ":"&#245;","ö":"&#246;","ø":"&#248;","ù":"&#249;","ú":"&#250;","û":"&#251;","ü":"&#252;","ý":"&#253;","þ":"&#254;","ÿ":"&#255;"};for(var c in d){f=f.replace(new RegExp(c,"g"),d[c])}}catch(g){DnaUOL.Log.error("DnaUOL.Helpers.toHtmlEntities",g)}return f}};var DnaUOL=DnaUOL||{};DnaUOL.Library=new function(){this.get=function(b){return(typeof a[b]!="undefined"?new a[b]():null)};var a=new function(){this.swf=function(){if(!DnaUOL.swfobject){try{DnaUOL.swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var d=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,h=aB.userAgent.toLowerCase(),f=aB.platform.toLowerCase(),l=f?/win/.test(f):/win/.test(h),n=f?/mac/.test(f):/mac/.test(h),k=/webkit/.test(h)?parseFloat(h.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,g=!+"\v1",j=[0,0,0],o=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){o=aB.plugins[ab].description;if(o&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;g=false;o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1");j[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10);j[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10);j[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var m=new ActiveXObject(X);if(m){o=m.GetVariable("$version");if(o){g=true;o=o.split(" ")[1].split(",");j=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)]}}}catch(e){}}}return{w3:d,pv:j,wk:k,ie:g,win:l,mac:n}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var e=aL.getElementsByTagName("body")[0].appendChild(ar("span"));e.parentNode.removeChild(e)}catch(d){return}ak=true;var g=Z.length;for(var f=0;f<g;f++){Z[f]()}}function aj(d){if(ak){d()}else{Z[Z.length]=d}}function aC(d){if(typeof af.addEventListener!=aq){af.addEventListener("load",d,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",d,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",d)}else{if(typeof af.onload=="function"){var e=af.onload;af.onload=function(){e();d()}}else{af.onload=d}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var g=aL.getElementsByTagName("body")[0];var e=ar(aD);e.setAttribute("type",aE);var d=g.appendChild(e);if(d){var f=0;(function(){if(typeof d.GetVariable!=aq){var h=d.GetVariable("$version");if(h){h=h.split(" ")[1].split(",");ah.pv=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}}else{if(f<10){f++;setTimeout(arguments.callee,10);return}}g.removeChild(e);d=null;am()})()}else{am()}}function am(){var k=aG.length;if(k>0){for(var l=0;l<k;l++){var f=aG[l].id;var p=aG[l].callbackFn;var d={success:false,id:f};if(ah.pv[0]>0){var m=aS(f);if(m){if(ao(aG[l].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(f,true);if(p){d.success=true;d.ref=av(f);p(d)}}else{if(aG[l].expressInstall&&au()){var h={};h.data=aG[l].expressInstall;h.width=m.getAttribute("width")||"0";h.height=m.getAttribute("height")||"0";if(m.getAttribute("class")){h.styleclass=m.getAttribute("class")}if(m.getAttribute("align")){h.align=m.getAttribute("align")}var j={};var g=m.getElementsByTagName("param");var o=g.length;for(var n=0;n<o;n++){if(g[n].getAttribute("name").toLowerCase()!="movie"){j[g[n].getAttribute("name")]=g[n].getAttribute("value")}}ae(h,j,f,p)}else{aF(m);if(p){p(d)}}}}}else{ay(f,true);if(p){var e=av(f);if(e&&typeof e.SetVariable!=aq){d.success=true;d.ref=e}p(d)}}}}}function av(e){var g=null;var f=aS(e);if(f&&f.nodeName=="OBJECT"){if(typeof f.SetVariable!=aq){g=f}else{var d=f.getElementsByTagName(aD)[0];if(d){g=d}}}return g}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(j,g,l,h){aU=true;ap=h||null;at={success:false,id:l};var d=aS(l);if(d){if(d.nodeName=="OBJECT"){aJ=aO(d);ad=null}else{aJ=d;ad=l}j.id=ac;if(typeof j.width==aq||(!/%$/.test(j.width)&&parseInt(j.width,10)<310)){j.width="310"}if(typeof j.height==aq||(!/%$/.test(j.height)&&parseInt(j.height,10)<137)){j.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var e=ah.ie&&ah.win?"ActiveX":"PlugIn",f="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+e+"&MMdoctitle="+aL.title;if(typeof g.flashvars!=aq){g.flashvars+="&"+f}else{g.flashvars=f}if(ah.ie&&ah.win&&d.readyState!=4){var k=ar("div");l+="SWFObjectNew";k.setAttribute("id",l);d.parentNode.insertBefore(k,d);d.style.display="none";(function(){if(d.readyState==4){d.parentNode.removeChild(d)}else{setTimeout(arguments.callee,10)}})()}aA(j,g,l)}}function aF(d){if(ah.ie&&ah.win&&d.readyState!=4){var e=ar("div");d.parentNode.insertBefore(e,d);e.parentNode.replaceChild(aO(d),e);d.style.display="none";(function(){if(d.readyState==4){d.parentNode.removeChild(d)}else{setTimeout(arguments.callee,10)}})()}else{d.parentNode.replaceChild(aO(d),d)}}function aO(e){var g=ar("div");if(ah.win&&ah.ie){g.innerHTML=e.innerHTML}else{var h=e.getElementsByTagName(aD)[0];if(h){var d=h.childNodes;if(d){var j=d.length;for(var f=0;f<j;f++){if(!(d[f].nodeType==1&&d[f].nodeName=="PARAM")&&!(d[f].nodeType==8)){g.appendChild(d[f].cloneNode(true))}}}}}return g}function aA(h,k,f){var g,d=aS(f);if(ah.wk&&ah.wk<312){return g}if(d){if(typeof h.id==aq){h.id=f}if(ah.ie&&ah.win){var j="";for(var m in h){if(h[m]!=Object.prototype[m]){if(m.toLowerCase()=="data"){k.movie=h[m]}else{if(m.toLowerCase()=="styleclass"){j+=' class="'+h[m]+'"'}else{if(m.toLowerCase()!="classid"){j+=" "+m+'="'+h[m]+'"'}}}}}var l="";for(var n in k){if(k[n]!=Object.prototype[n]){l+='<param name="'+n+'" value="'+k[n]+'" />'}}d.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+j+">"+l+"</object>";ag[ag.length]=h.id;g=aS(h.id)}else{var e=ar(aD);e.setAttribute("type",aE);for(var o in h){if(h[o]!=Object.prototype[o]){if(o.toLowerCase()=="styleclass"){e.setAttribute("class",h[o])}else{if(o.toLowerCase()!="classid"){e.setAttribute(o,h[o])}}}}for(var p in k){if(k[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"){aQ(e,p,k[p])}}d.parentNode.replaceChild(e,d);g=e}}return g}function aQ(e,g,f){var d=ar("param");d.setAttribute("name",g);d.setAttribute("value",f);e.appendChild(d)}function aw(d){var e=aS(d);if(e&&e.nodeName=="OBJECT"){if(ah.ie&&ah.win){e.style.display="none";(function(){if(e.readyState==4){aT(d)}else{setTimeout(arguments.callee,10)}})()}else{e.parentNode.removeChild(e)}}}function aT(d){var e=aS(d);if(e){for(var f in e){if(typeof e[f]=="function"){e[f]=null}}e.parentNode.removeChild(e)}}function aS(d){var f=null;try{f=aL.getElementById(d)}catch(e){}return f}function ar(d){return aL.createElement(d)}function aM(d,f,e){d.attachEvent(f,e);al[al.length]=[d,f,e]}function ao(d){var e=ah.pv,f=d.split(".");f[0]=parseInt(f[0],10);f[1]=parseInt(f[1],10)||0;f[2]=parseInt(f[2],10)||0;return(e[0]>f[0]||(e[0]==f[0]&&e[1]>f[1])||(e[0]==f[0]&&e[1]==f[1]&&e[2]>=f[2]))?true:false}function az(e,j,d,f){if(ah.ie&&ah.mac){return}var h=aL.getElementsByTagName("head")[0];if(!h){return}var k=(d&&typeof d=="string")?d:"screen";if(f){aH=null;an=null}if(!aH||an!=k){var g=ar("style");g.setAttribute("type","text/css");g.setAttribute("media",k);aH=h.appendChild(g);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=k}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(e,j)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(e+" {"+j+"}"))}}}function ay(d,f){if(!aI){return}var e=f?"visible":"hidden";if(ak&&aS(d)){aS(d).style.visibility=e}else{az("#"+d,"visibility:"+e)}}function ai(e){var d=/[\\\"<>\.;]/;var f=d.exec(e)!=null;return f&&typeof encodeURIComponent!=aq?encodeURIComponent(e):e}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var d=al.length;for(var e=0;e<d;e++){al[e][0].detachEvent(al[e][1],al[e][2])}var g=ag.length;for(var f=0;f<g;f++){aw(ag[f])}for(var h in ah){ah[h]=null}ah=null;for(var j in DnaUOL.swfobject){DnaUOL.swfobject[j]=null}DnaUOL.swfobject=null})}}();return{registerObject:function(d,h,f,e){if(ah.w3&&d&&h){var g={};g.id=d;g.swfVersion=h;g.expressInstall=f;g.callbackFn=e;aG[aG.length]=g;ay(d,false)}else{if(e){e({success:false,id:d})}}},getObjectById:function(d){if(ah.w3){return av(d)}},embedSWF:function(o,h,l,j,f,d,e,m,k,n){var g={success:false,id:h};if(ah.w3&&!(ah.wk&&ah.wk<312)&&o&&h&&l&&j&&f){ay(h,false);aj(function(){l+="";j+="";var u={};if(k&&typeof k===aD){for(var s in k){u[s]=k[s]}}u.data=o;u.width=l;u.height=j;var r={};if(m&&typeof m===aD){for(var t in m){r[t]=m[t]}}if(e&&typeof e===aD){for(var p in e){if(typeof r.flashvars!=aq){r.flashvars+="&"+p+"="+e[p]}else{r.flashvars=p+"="+e[p]}}}if(ao(f)){var q=aA(u,r,h);if(u.id==h){ay(h,true)}g.success=true;g.ref=q}else{if(d&&au()){u.data=d;ae(u,r,h,n);return}else{ay(h,true)}}if(n){n(g)}})}else{if(n){n(g)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(d,e,f){if(ah.w3){return aA(d,e,f)}else{return undefined}},showExpressInstall:function(e,d,g,f){if(ah.w3&&au()){ae(e,d,g,f)}},removeSWF:function(d){if(ah.w3){aw(d)}},createCSS:function(e,d,f,g){if(ah.w3){az(e,d,f,g)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(e){var d=aL.location.search||aL.location.hash;if(d){if(/\?/.test(d)){d=d.split("?")[1]}if(e==null){return ai(d)}var f=d.split("&");for(var g=0;g<f.length;g++){if(f[g].substring(0,f[g].indexOf("="))==e){return ai(f[g].substring((f[g].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var d=aS(ac);if(d&&aJ){d.parentNode.replaceChild(aJ,d);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}()}catch(b){DnaUOL.swfobject=false;DnaUOL.Log.error("DnaUOL.swfobject",b)}}var c="dnauol-swf";this.create=function(){var d=false;try{if(DnaUOL.swfobject){var g=DnaUOL.Helpers.createHtmlElement("div",{id:c+"-wrapper"});g.innerHTML='<div id="'+c+'"></div>';DnaUOL.swfobject.embedSWF(DnaUOL.appUrl+"/resource/dna.swf",c,"1","1","9",{},{},{allowscriptaccess:"always"})}}catch(f){DnaUOL.Log.error("DnaUOL.Library.swf.create",f)}};this.createHandler=function(){var d=false;try{d=DnaUOL.swfobject.getObjectById(c);if(d){this.handler=d}}catch(f){DnaUOL.Log.error("DnaUOL.Library.swf.cacheHandler",f)}return d}};this.jsonParser=function(){var b;if(jQuery.parseJSON){b=jQuery.parseJSON}else{b=(function(){var f,d,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},p,n=function(q){throw {name:"SyntaxError",message:q,at:f,text:p}},j=function(q){if(q&&q!==d){n("Expected '"+q+"' instead of '"+d+"'")}d=p.charAt(f);f+=1;return d},h=function(){var r,q="";if(d==="-"){q="-";j("-")}while(d>="0"&&d<="9"){q+=d;j()}if(d==="."){q+=".";while(j()&&d>="0"&&d<="9"){q+=d}}if(d==="e"||d==="E"){q+=d;j();if(d==="-"||d==="+"){q+=d;j()}while(d>="0"&&d<="9"){q+=d;j()}}r=+q;if(!isFinite(r)){n("Bad number")}else{return r}},k=function(){var t,s,r="",q;if(d==='"'){while(j()){if(d==='"'){j();return r}if(d==="\\"){j();if(d==="u"){q=0;for(s=0;s<4;s+=1){t=parseInt(j(),16);if(!isFinite(t)){break}q=q*16+t}r+=String.fromCharCode(q)}else{if(typeof c[d]==="string"){r+=c[d]}else{break}}}else{r+=d}}}n("Bad string")},m=function(){while(d&&d<=" "){j()}},e=function(){switch(d){case"t":j("t");j("r");j("u");j("e");return true;case"f":j("f");j("a");j("l");j("s");j("e");return false;case"n":j("n");j("u");j("l");j("l");return null}n("Unexpected '"+d+"'")},o,l=function(){var q=[];if(d==="["){j("[");m();if(d==="]"){j("]");return q}while(d){q.push(o());m();if(d==="]"){j("]");return q}j(",");m()}}n("Bad array")},g=function(){var r,q={};if(d==="{"){j("{");m();if(d==="}"){j("}");return q}while(d){r=k();m();j(":");if(Object.hasOwnProperty.call(q,r)){n('Duplicate key "'+r+'"')}q[r]=o();m();if(d==="}"){j("}");return q}j(",");m()}}n("Bad object")};o=function(){m();switch(d){case"{":return g();case"[":return l();case'"':return k();case"-":return h();default:return d>="0"&&d<="9"?h():e()}};return function(t,r){var q;p=t;f=0;d=" ";q=o();m();if(d){n("Syntax error")}return typeof r==="function"?(function s(y,x){var w,u,z=y[x];if(z&&typeof z==="object"){for(w in z){if(Object.prototype.hasOwnProperty.call(z,w)){u=s(z,w);if(u!==undefined){z[w]=u}else{delete z[w]}}}}return r.call(y,x,z)}({"":q},"")):q}}())}this.parse=function(c){return b(c)}}}};var DnaUOL=DnaUOL||{};DnaUOL.HttpConnection=new function(){var b=function(d,e){var g={type:e,url:(d.url?d.url:""),data:(d.data?d.data:""),callback:(typeof d.callback==="function"?d.callback:function(h){}),error:(typeof d.error==="function"?d.error:function(h){}),cache:(d.cache?d.cache:false),ifModified:(d.ifModified?d.ifModified:false),headers:(d.headers?d.headers:{}),dataType:(d.dataType?d.dataType:"html")};var f=Boolean(DnaUOL.browser.isIE&&window.XDomainRequest);if(f){c(g)}else{a(g)}};var a=function(d){jQuery.ajax({url:d.url,data:d.data,type:d.type,dataType:d.dataType,cache:d.cache,ifModified:d.ifModified,headers:d.headers,crossDomain:true,xhrFields:{withCredentials:true},complete:function(e){var f=!!e.responseText?e.responseText:false;if(e.status!=200&&e.status!=204&&e.status!=304){if(!!!d.attempted){d.attempted=true;DnaUOL.Log.error("Inappropriate response status "+e.status+" on internal func jQueryRequest in DnaUOL.HttpConnection. Will try a next attempt.",e.responseText);a(d);f=false;return}else{f=false;DnaUOL.Log.error("Inappropriate response status "+e.status+" on internal func jQueryRequest in DnaUOL.HttpConnection. Last attempt of get a valid response failed.",e.responseText);d.callback(f);return}}d.callback(f)},error:function(h,j,f){var g=String(" url("+d.url+"), status("+h.status+"), textStatus("+j+"), content("+f+")");DnaUOL.Log.debug("DnaUOL.HttpConnection.jQueryRequest",g);d.error(g)}})};var c=function(e,h){var g=new XDomainRequest(),d=(h==null)?true:h;var f=function(k){if(d){d=false;var j=parseInt(DnaUOL.browser.version,10);if(j>=7&&j<=9){c(e,d)}else{a(e)}}else{e.attempted=true;var l=String(" XDRequest "+k+" ("+e.url+")");DnaUOL.Log.debug("DnaUOL.HttpConnection.XDRequest",l);e.error(l)}};if("withCredentials" in g){g.withCredentials="true"}g.open(e.type,e.url);g.onprogress=function(){};g.onload=function(){var j=!!g.responseText?g.responseText:false;var k=JSON.parse(j);if(!!g.responseText&&!!!k._id&&!!!k.lastUpdate){if(!!!e.attempted){e.attempted=true;DnaUOL.Log.error("Inappropriate response status "+g.status+" on internal func XDRequest in DnaUOL.HttpConnection. Will try a next attempt.",g.responseText);c(e,d);j=false;return}else{j=false;DnaUOL.Log.error("Inappropriate response status "+g.status+" on internal func XDRequest in DnaUOL.HttpConnection. Last attempt of get a valid response failed.",g.responseText);e.callback(j);return}}e.callback(j)};g.ontimeout=function(){DnaUOL.Log.debug("DnaUOL.HttpConnection.XDRequest","XDRequest timeout ("+e.url+")");f("timeout")};g.onerror=function(){DnaUOL.Log.debug("DnaUOL.HttpConnection.XDRequest"," XDRequest error ("+e.url+")");f("error")};g.timeout=3000;g.send(e.data)};this.get=function(f){try{b(f,"GET")}catch(g){var d=f.url?f.url:"NO URL";DnaUOL.Log.debug("DnaUOL.HttpConnection.get",d+" -> Error: "+g)}};this.post=function(f){try{b(f,"POST")}catch(g){var d=f.url?f.url:"NO URL";DnaUOL.Log.debug("DnaUOL.HttpConnection.post",d+" -> Error: "+g)}}};var DnaUOL=DnaUOL||{};DnaUOL.PersistedValue=function(){var b;var c;var a;this.getUid=function(){return b};this.setUid=function(d){b=DnaUOL.Helpers.trim(String(d))};this.getLastUpdate=function(){return c};this.setLastUpdate=function(d){if(d){if(typeof d=="object"){c=new Date(d.getTime())}else{c=new Date(parseInt(d,16))}}};this.getDetectionFlag=function(){return a};this.setDetectionFlag=function(d){a=Boolean(d)};this.setAttributes=function(d){if(typeof d=="object"){if(d.uid){this.setUid(d.uid)}if(d.lastUpdate){this.setLastUpdate(d.lastUpdate)}if(d.detectionFlag){this.setDetectionFlag(d.detectionFlag)}}else{if(typeof d==="string"){this.parseString(d)}}};this.parseString=function(e){if(typeof e=="string"){var f=DnaUOL.Config.get("cookieValueSeparator");var d=e.split(f);if(d[0]){this.setUid(d[0])}if(d[1]){this.setLastUpdate(d[1])}if(d[2]){this.setDetectionFlag(d[2])}}};this.getString=function(){var d="";pieces=[];pieces.push(b?DnaUOL.Helpers.trim(b):"");if(typeof c=="object"&&c){pieces.push(DnaUOL.Helpers.trim(c.getTime().toString(16)))}if(typeof a=="boolean"&&a){pieces.push(String(a))}d=pieces.join("|");return d};this.getLogString=function(){return"UID ("+this.getUid()+"), LastUpdate ("+this.getLastUpdate()+")"}};var DnaUOL=DnaUOL||{};DnaUOL.Services=new function(){this.DeviceId=new function(){var a=new DnaUOL.Library.get("jsonParser");var c=function(e){var d=DnaUOL.appUrl+DnaUOL.Config.get("uidServicePath");DnaUOL.HttpConnection.post({url:d,cache:false,data:e.data,dataType:"text",callback:function(f){DnaUOL.Log.debug("Services.DeviceId.callService",("Server response -> "+String(f).replace(/"/g,'"')+""));if(typeof f==="string"&&f){var g=a.parse(f);if(g._id&&g.lastUpdate){var h=new DnaUOL.PersistedValue();h.setAttributes({uid:g._id,lastUpdate:g.lastUpdate});e.callBack(h)}else{e.callBack(false)}}else{e.callBack(false)}},error:function(f){if(!!this.attempted){DnaUOL.Log.error("Services.DeviceId.callService",f);e.callBack(false)}}})};this.create=function(d){DnaUOL.Log.debug("Services.DeviceId.create","Creating UID");c({data:b(d),callBack:d.callback})};this.update=function(d){DnaUOL.Log.debug("Services.DeviceId.update","Updating device data, actual data: "+d.data.getLogString());c({data:b(d),callBack:d.callback})};var b=function(k){var s="";try{var q=function(e){return DnaUOL.Helpers.toHtmlEntities(DnaUOL.Helpers.trim(String(e)))};var z=function(e){e=q(e);e=e.replace(/\./g,"");e=e.replace(/\//g,"");e=e.replace(/\\/g,"");return(e)};var n=function(e,B){return'{"'+z(e)+'": "'+q(B)+'"}'};var t=function(B,D){var e=[];for(var C in D){e.push('{"'+z(C)+'": "'+q(D[C])+'"}')}e=e.join(", ");return'{"'+B+'": ['+e+"]}"};var y=function(B,D){var e=[];for(var C in D){e[C]=('"'+q(D[C])+'"')}e=e.join(", ");return'{"'+B+'": ['+e+"]}"};var j=function(e){return'{"'+q(e)+'": null}'};var l=function(C){var e=false;if(typeof C==="object"){for(var B in C){if(C[B]){e=true;break}}}return e};var A=function(C){var e=false;if(typeof C==="object"){for(var B in C){e=true;break}}return e};var p;if(typeof k.detections==="object"){var g=[];for(var u in k.detections){var x=k.detections[u];var h=false;if(x.timeout){h=j(u)}else{if(x.type=="boolean"&&typeof x.value==="boolean"){h=n(u,String(x.value))}else{if(x.type=="string"&&typeof x.value==="string"){h=n(u,x.value)}else{if(x.type=="array"&&typeof x.value==="object"&&l(x.value)){h=y(u,x.value)}else{if(x.type=="json"&&typeof x.value==="object"&&A(x.value)){h=t(u,x.value)}}}}}if(h){g.push(h)}}p=String("[ "+g.join(", ")+" ]")}else{p="false"}var v=(Date.now)?Date.now():+new Date;var o=typeof k.data==="object"?k.data.getUid():false;var m=(Boolean(o)?('"_id":"'+o+'", '):"");var f='"sess":"'+k.sess+'", ';var r='"elapsedTime":"'+(v-k.startTime)+'", ';var d='"attributes": '+p;s=("{"+m+f+r+d+"}");DnaUOL.Log.debug("Services.DeviceId.parseData",("Device Data ("+d+")"))}catch(w){DnaUOL.Log.error("Services.DeviceId.parseData",w)}return s}};this.Persistence=new function(){this.etagRequest=function(b){var c={};var a=(DnaUOL.appUrl+DnaUOL.Config.get("etagServicePath"));if(b.etag){c={"If-None-Match":(b.etag)}}DnaUOL.HttpConnection.get({url:a,cache:false,dataType:"text",headers:c,callback:b.callback?b.callback:false,error:b.error?b.error:false})};this.serverRequest=function(b){var a=(DnaUOL.appUrl+DnaUOL.Config.get("cookieServicePath"));DnaUOL.HttpConnection.get({url:a,cache:false,dataType:"text",callback:b.callback,error:b.error})};this.imageRequest=function(b){var a=(DnaUOL.appUrl+DnaUOL.Config.get("imageServicePath"));var d=new Image();try{if(b){d.crossOrigin=""}d.src=String(a)}catch(c){DnaUOL.Log.error("Services.Persistence.imageRequest",c)}return d}};this.simpleRequest=function(b){var a=DnaUOL.appUrl+DnaUOL.Config.get("simpleRequestServicePath");var c=(Date.now)?Date.now():+new Date;DnaUOL.HttpConnection.get({url:a+"?id="+b.uid+"&sess="+b.sess+"&elapsedTime="+(c-b.startTime),cache:false,dataType:"text",callback:function(d){DnaUOL.Log.debug("Services.simpleRequest",("Server response -> "+String(d).replace(/"/g,'"')+""));if(typeof b.callBack=="function"){b.callBack(d)}},error:function(d){DnaUOL.Log.error("Services.simpleRequest",d);if(typeof b.callBack=="function"){b.callBack(false)}}})}};var DnaUOL=DnaUOL||{};DnaUOL.Detections=function(){this.get=function(a){var b=false;if(typeof this.list[a]==="function"){try{b=new this.list[a]()}catch(c){DnaUOL.Log.error("Detections.get("+a+")",c)}}return b};this.list={sessionStorage:function(){this.type="boolean";this.get=function(){return Boolean(typeof window.sessionStorage!="undefined")}},geolocation:function(){this.type="boolean";this.get=function(){return Boolean(typeof navigator.geolocation!="undefined")}},globalStorage:function(){this.type="boolean";this.get=function(){return Boolean(typeof window.globalStorage!="undefined")}},localStorage:function(){this.type="boolean";this.get=function(){return Boolean(typeof window.localStorage!="undefined")}},openDatabase:function(){this.type="boolean";this.get=function(){return Boolean(typeof window.openDatabase!="undefined")}},activeX:function(){this.type="boolean";this.get=function(){return Boolean(typeof window.ActiveXObject!="undefined")}},geckoActiveX:function(){this.type="boolean";this.get=function(){return Boolean(typeof GeckoActiveXObject!="undefined")}},console:function(){this.type="boolean";this.get=function(){return Boolean(window.console)}},iEuserData:function(){this.type="boolean";this.get=function(){var a=false;var d=DnaUOL.Config.get("appKey");try{var b=document.getElementById("dnauol-userdata");b.load(d);a=b.getAttribute(d)}catch(c){a=false}return a}},ajax:function(){this.type="boolean";this.get=function(){var a=false,c;if(typeof XMLHttpRequest!="undefined"){a=true}else{try{c=new ActiveXObject("Msxml2.XMLHTTP");a=Boolean(typeof c!="indefined")}catch(b){try{c=new ActiveXObject("Microsoft.XMLHTTP");a=Boolean(typeof c!="indefined")}catch(b){a=false}}}return a}},plugins:function(){this.type="array";this.get=function(){var a=[];if(navigator.plugins){for(var d in navigator.plugins){if(typeof navigator.plugins[d]!="function"){var b=[];var c=navigator.plugins[d].name;if(c&&c!="refresh"&&c!="namedItem"&&c!="item"){b.push(c)}if(navigator.plugins[d].description){b.push(navigator.plugins[d].description)}if(navigator.plugins[d].filename){b.push(navigator.plugins[d].filename)}if(navigator.plugins[d].suffixes){b.push(navigator.plugins[d].suffixes)}if(b.length>=1){a.push(DnaUOL.Helpers.trim(b.join(" ")))}}}}return a}},dc:function(){this.type="array";this.get=function(){var a=[];if(typeof document!="undefined"){if(typeof(document.all)!="undefined"){a.push("all")}if(typeof(document.anchors)!="undefined"){a.push("anchors")}if(typeof(document.forms)!="undefined"){a.push("forms")}if(typeof(document.getElementById)!="undefined"){a.push("getElementById")}if(typeof(document.getElementsByTagName)!="undefined"){a.push("getElementsByTagName")}if(typeof(document.documentElement)!="undefined"){a.push("documentElement")}if(typeof(document.images)!="undefined"){a.push("images")}if(typeof(document.layers)!="undefined"){a.push("layers")}if(typeof(document.links)!="undefined"){a.push("links")}}return a}},fontsJava:function(){var k=parseInt(DnaUOL.browser.version,10);var f=Boolean(Boolean(navigator.javaEnabled)&&navigator.javaEnabled());var e=Boolean(!isNaN(k)&&DnaUOL.browser.isIE&&k>=7&&k<=9);var d=Boolean(DnaUOL.browser.isFirefox);var j=Boolean(e||d);var b=Boolean(f&&j);DnaUOL.Log.debug("detections.fontsJava","navigator.javaEnabled() "+String(f)+", browser in white list "+String(j));if(b){var l="dnauol-applet",h;var g=DnaUOL.appUrl+"/resource";var c="DNA.class";var a=function(){var n=DnaUOL.Helpers.createHtmlElement("div",{id:(l+"-wrapper")});var m='<applet mayscript="true" width="1" height="1"  id="'+l+'" code="'+c+'" codebase="'+g+'"></applet>';n.innerHTML=(m)};this.ready=false;this.async=true;this.type="array";this.init=function(){a();h=document.getElementById(l)};this.isAvailable=function(){var m;try{m=Boolean(Boolean(h)&&typeof h.getFonts!="undefined")}catch(n){m=false}return Boolean(m)};this.get=function(){var m=[];var p=h.getFonts();var o=false;for(var n=0;n<p.length;n++){m.push(String(p[n]));o=true}if(o){m.push("____fontsJava____")}return m}}},fontsFlash:function(){if(DnaUOL.Helpers.flashSupport()){var a;this.ready=false;this.async=true;this.type="array";this.init=function(){if(!DnaUOL.swfLib){DnaUOL.swfLib=DnaUOL.Library.get("swf");DnaUOL.swfLib.create()}};this.get=function(){var b=[];var c=DnaUOL.swfLib.handler.getDeviceFonts();if(typeof c==="string"){c=DnaUOL.Helpers.trim(c);if(c.charAt(c.length-1)==";"){c=c.slice(0,-1)}b=c.split(";");if(b.length>=1){b.push("____fontsFlash____")}}return b};this.isAvailable=function(){var b=false;if(!DnaUOL.swfLib.handler){DnaUOL.swfLib.createHandler()}if(DnaUOL.swfLib.handler){if(typeof DnaUOL.swfLib.handler.getDeviceFonts==="function"){b=true}}return b}}},iEComponents:function(){if(DnaUOL.browser.isIE&&parseInt(DnaUOL.browser.version,10)<=8){var a="oClientCaps";var d;this.type="json";this.ready=false;this.async=true;var b=function(f){var e=false;if(typeof(d)!="undefined"&&typeof(d.id)!="undefined"){e=d.isComponentInstalled(f,"ComponentID")}return e};var c=function(f){var e=false;if(typeof(d)!="undefined"&&typeof(d.id)!="undefined"&&typeof(d.getComponentVersion)!="undefined"){e=d.getComponentVersion(f,"ComponentID")}return e};this.init=function(){var e=DnaUOL.Helpers.createHtmlElement(a,{id:a+"-wrapper"});e.innerHTML='<IE:clientCaps id="'+a+'" style="behavior:url(#default#clientCaps);" />';d=document.getElementById(a)};this.isAvailable=function(){var e=true;e=Boolean(d);return e};this.get=function(){var e=[];var h={"47F67D00-9E55-11D1-BAEF-00C04FC2D130":"AOL ART Image Format Support","7790769C-0471-11D2-AF11-00C04FA35D02":"Address Book","76C19B38-F0C8-11CF-87CC-0020AFEECF20":"Arabic Text Display Support","76C19B34-F0C8-11CF-87CC-0020AFEECF20":"Chinese (Simplified) Text Display Support","76C19B33-F0C8-11CF-87CC-0020AFEECF20":"Chinese (Traditional) Text Display Support","4F216970-C90C-11D1-B5C7-0000F8051515":"DirectAnimation Java Classes","283807B5-2C60-11D0-A31D-00AA00B92C03":"DirectAnimation","44BBA848-CC51-11CF-AAFA-00AA00B6015C":"DirectShow","4F216970-C90C-11D1-B5C7-0000F8051515":"Dynamic HTML Data Binding for Java","9381D8F2-0288-11D0-9501-00AA00B911A5":"Dynamic HTML Data Binding","76C19B36-F0C8-11CF-87CC-0020AFEECF20":"Hebrew Text Display Support","5A8D6EE0-3E18-11D0-821E-444553540000":"Internet Connection Wizard","89820200-ECBD-11CF-8B85-00AA005B4383":"Internet Explorer Web Browser","630B1DA0-B465-11D1-9948-00C04F98BBC9":"Internet Explorer Browsing Enhancements","08B0E5C0-4FCB-11CF-AAA5-00401C608555":"Internet Explorer Classes for Java","DE5AED00-A4BF-11D1-9948-00C04F98BBC9":"Internet Explorer Help Engine","45EA75A0-A269-11D1-B5BF-0000F8051515":"Internet Explorer Help","89820200-ECBD-11CF-8B85-00AA005B4383":"Internet Explorer Web Browser","76C19B30-F0C8-11CF-87CC-0020AFEECF20":"Japanese Text Display Support","76C19B31-F0C8-11CF-87CC-0020AFEECF20":"Korean Text Display Support","76C19B50-F0C8-11CF-87CC-0020AFEECF20":"Language Auto-Selection","D27CDB6E-AE6D-11CF-96B8-444553540000":"Macromedia Flash","2A202491-F00D-11CF-87CC-0020AFEECF20":"Macromedia Shockwave Director","08B0E5C0-4FCB-11CF-AAA5-00401C608500":"Microsoft virtual machine","44BBA842-CC51-11CF-AAFA-00AA00B6015B":"NetMeeting NT","3AF36230-A269-11D1-B5BF-0000F8051515":"Offline Browsing Pack","44BBA840-CC51-11CF-AAFA-00AA00B6015C":"Outlook Express","76C19B32-F0C8-11CF-87CC-0020AFEECF20":"Pan-European Text Display Support","CC2A9BA0-3BDD-11D0-821E-444553540000":"Task Scheduler","76C19B35-F0C8-11CF-87CC-0020AFEECF20":"Thai Text Display Support","3BF42070-B3B1-11D1-B5C5-0000F8051515":"Uniscribe","90A7533D-88FE-11D0-9DBE-0000C0411FC3":"VRML 2.0 Viewer","10072CEC-8CC1-11D1-986E-00A0C955B42F":"Vector Graphics Rendering (VML)","76C19B37-F0C8-11CF-87CC-0020AFEECF20":"Vietnamese Text Display Support","4F645220-306D-11D2-995D-00C04F98BBC9":"Visual Basic Scripting Support","1CDEE860-E95B-11CF-B1B0-00AA00BBAD66":"Wallet","73FA19D0-2D75-11D2-995D-00C04F98BBC9":"Web Folders","89820200-ECBD-11CF-8B85-00AA005B4340":"Windows Desktop Update NT","23064720-C4F8-11D1-994D-00C04F98BBC9":"Windows Media Player RealNetwork Support","22D6F312-B0F6-11D0-94AB-0080C74C7E95":"Windows Media Player"};for(var g in h){var f="{"+g+"}";if(b(f)){e[h[g]]=String(c(f))}}return e}}else{this.isAvailable=function(){return true};this.get=function(){}}},ct:function(){this.type="json";this.get=function(){var a=[];if(typeof window.crypto!="undefined"){if(typeof window.crypto.version!="undefined"){a.version=window.crypto.version}if(typeof window.crypto.enableSmartCardEvents!="undefined"){a.enableSmartCardEvents=window.crypto.enableSmartCardEvents}}return a}},mimeTypes:function(){this.type="json";this.get=function(){var a=[];if(!DnaUOL.browser.isIE&&typeof navigator.mimeTypes==="object"){for(var c in navigator.mimeTypes){var d=navigator.mimeTypes[c];if(typeof d.type==="string"){var b=[];b.push(String(d.description));b.push(String(d.enabledPlugin));b.push(String(d.suffixes));a[d.type]=DnaUOL.Helpers.trim(b.join(" "))}}}return a}},svg:function(){this.type="json";this.get=function(){var a=[];if(typeof document.implementation!="undefined"&&typeof document.implementation.hasFeature!="undefined"){var b=["SVG","SVGDOM","SVG-static","SVGDOM-static","SVG-animation","SVGDOM-animation","SVG-dynamic","SVGDOM-dynamic","CoreAttribute","Structure","ContainerAttribute","ConditionalProcessing","Image","Style","ViewportAttribute","Shape","Text","PaintAttribute","OpacityAttribute","GraphicsAttribute","Marker","ColorProfile","Gradient","Pattern","Clip","Mask","Filter","XlinkAttribute","Font","Extensibility","BasicStructure","BasicText","BasicPaintAttribute","BasicGraphicsAttribute","BasicClip","BasicFilter","DocumentEventsAttribute","GraphicalEventsAttribute","AnimationEventsAttribute","Cursor","Hyperlinking","ExternalResourcesRequired","View","Script","Animation","BasicFont"];var c="http://www.w3.org/TR/SVG11/feature#";for(var d in b){a[b[d]]=document.implementation.hasFeature(String(c+b[d]),"1.1")}}return a}},language:function(){this.type="json";this.get=function(){var a=[];if(typeof navigator.language!="undefined"){if(typeof(navigator.language)!="undefined"){a.language=String(navigator.language)}if(typeof(navigator.browserLanguage)!="undefined"){a.browserLanguage=String(navigator.browserLanguage)}if(typeof(navigator.systemLanguage)!="undefined"){a.systemLanguage=String(navigator.systemLanguage)}if(typeof(navigator.userLanguage)!="undefined"){a.userLanguage=String(navigator.userLanguage)}}return a}},screen:function(){this.type="json";this.get=function(){var a=[];if(typeof screen==="object"){for(var b in screen){if(typeof screen[b]!="function"){a[b]=screen[b]}}}return a}},navigator:function(){this.type="json";this.get=function(){var a=[];if(typeof navigator!="undefined"){if(typeof(navigator.appName)!="undefined"){a.appName=String(navigator.appName)}if(typeof(navigator.appMinorVersion)!="undefined"){a.appMinorVersion=String(navigator.appMinorVersion)}if(typeof(navigator.vendor)!="undefined"){a.vendor=String(navigator.vendor)}if(typeof(navigator.oscpu)!="undefined"){a.oscpu=String(navigator.oscpu)}if(typeof(navigator.platform)!="undefined"){a.platform=String(navigator.platform)}if(typeof(navigator.securityPolicy)!="undefined"){a.securityPolicy=String(navigator.securityPolicy)}}return a}},}};var DnaUOL=DnaUOL||{};DnaUOL.DeviceData=function(f){var d={single:{sessionStorage:{required:true},geolocation:{required:true},globalStorage:{required:true},localStorage:{required:true},openDatabase:{required:true},activeX:{required:true},geckoActiveX:{required:true},console:{required:true},iEuserData:{required:true},ajax:{required:true},ct:{required:true},dc:{required:true},svg:{required:true},plugins:{required:true},iEComponents:{required:true},mimeTypes:{required:true},language:{required:true},screen:{required:true},navigator:{required:true}},multi:{fonts:{fontsFlash:{required:true},fontsJava:{required:false}},}};var a=new DnaUOL.Detections();var e=function(h){var g=this;var j={detection:a.get(h),asyncInterval:DnaUOL.Config.get("asyncInterval"),maxAsyncAttempts:DnaUOL.Config.get("maxAsyncAttempts"),attempts:0};g.index=h;g.type=j.detection.type;g.timeout=false;g.async=(j.detection.async?true:false);g.ready=(j.detection.async?false:true);g.init=function(){if(typeof j.detection.init==="function"){try{j.detection.init();if(j.detection.async){g.checkAsync()}}catch(k){DnaUOL.Log.error("Inspection.init ("+g.index+")",k)}}};g.get=function(){var k;if(typeof j.detection.get==="function"){try{k=j.detection.get()}catch(l){k=false;DnaUOL.Log.error("Inspection.get ("+g.index+")",l)}}return k};if(j.detection.async){g.isAvailable=function(){var k;if(typeof j.detection.isAvailable==="function"){try{k=j.detection.isAvailable()}catch(l){DnaUOL.Log.debug("Inspection.isAvailable",l);k=false}}return k};g.checkAsync=function(){try{var k=(j.attempts>=j.maxAsyncAttempts);var l=g.isAvailable();if(l||k){if(k){g.timeout=true;DnaUOL.Log.debug("Inspection.checkAsync","Timeout ("+g.index+")")}else{DnaUOL.Log.debug("Inspection.checkAsync","("+g.index+") ready, attempt "+j.attempts)}g.ready=true}else{setTimeout(function(){j.attempts++;g.checkAsync()},j.asyncInterval)}}catch(m){g.ready=true;DnaUOL.Log.error("Inspection.checkAsync ("+g.index+")",m)}}}return g};var b=function(l,o){var j={list:typeof l==="object"?l:[l],callback:o,result:[],inspections:[],interval:DnaUOL.Config.get("asyncInterval")};var n=function(){var r=true;for(var q in j.inspections){h(q);if(!j.inspections[q].ready){r=false}}return r};var p=function(){if(n()){j.callback(j.result)}else{setTimeout(function(){p()},j.interval)}};var h=function(r){if(typeof j.result[r]==="undefined"){var q=j.inspections[r];if(!q.async||Boolean(q.async&&q.ready)){j.result[r]={type:q.type,value:Boolean(q.timeout)?false:q.get(),timeout:Boolean(q.timeout)}}}};var k=function(q){j.inspections[q]=new e(q);j.inspections[q].init()};var m=function(){for(var q in j.list){k(j.list[q])}};var g=function(){m();p()}()};var c=new function(){var j=false;var o=false;var p=false;var m=typeof f=="object"?f:false;var l=function(s){if(o&&p){var q=o;for(var r in p){q[r]=p[r]}s(q)}else{setTimeout(function(){l(s)},1)}};var h=function(s){var u=function(y){var v=[];for(var w in y){if(y[w].required){v.push(w)}else{if(m){for(var z in m){var x=m[z];if(x==w&&typeof y[x]=="object"&&!y[x].required){v.push(w);DnaUOL.Log.debug("DeviceData.get","Detection added by client: "+x)}}}}}return v};if(s=="single"){return u(d[s])}else{if(s=="multi"){var q={};for(var t in d[s]){var r=u(d[s][t]);q[t]=r}return q}}};var k=function(){var q=h("single");b(q,function(r){o=r})};var n=function(){var v=[];var w=[];var r=[];var q=h("multi");var u=function(){var y=true;for(var x in w){if(!w[x]){y=false;break}}if(y){p=r}else{setTimeout(function(){u()},1)}};var s=function(y){var x=q[y.name][y.index];b(x,function(A){var z=y.index+1;var B=q[y.name][z];if(A[x].timeout&&typeof B!="undefined"){y.index=z;s(y)}else{r[y.name]=A[x];w[y.name]=true}})};var t=function(){for(var x in q){w[x]=false;s({name:x,index:0})}u()}()};var g=function(q){j=true;k();n();l(q)};this.started=function(){return j};this.start=function(q){g(q)}};this.get=function(g){if(!c.started()){DnaUOL.Log.debug("DeviceData.get","Device data detection started");c.start(g)}}};var DnaUOL=DnaUOL||{};DnaUOL.PersistenceTricks=function(){var b=DnaUOL.Config.get("appKey");var a={cookie:function(){var c=false;try{c=document.cookie!="undefined"?true:false}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.cookie",d)}return c},window:function(){var c=false;try{c=typeof window.name!="undefined"?true:false}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.window",d)}return c},session:function(){var c=false;try{c=window.sessionStorage?true:false}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.session",d)}return c},global:function(){var c=false;try{c=window.globalStorage?true:false}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.global",d)}return c},local:function(){var c=false;try{c=window.localStorage?true:false}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.local",d)}return c},user:function(){var c=false;try{c=typeof DnaUOL.Helpers.getHtmlWrapper().style.behavior!="undefined"?true:false}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.user",d)}return c},server:function(){var c=false;try{c=DnaUOL.browser.isIE?false:true}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.server",d)}return c},etag:function(){var c=false;try{c=DnaUOL.browser.isIE?false:true}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.etag",d)}return c},database:function(){var c=false;try{c=window.openDatabase?true:false}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.database",d)}return c},swf:function(){var c=false;try{c=DnaUOL.Helpers.flashSupport()}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.swf",d)}return c},sl:function(){var c=false;try{if(!!DnaUOL.browser.isIE){c=Boolean(new ActiveXObject("AgControl.AgControl"))}else{if(!!DnaUOL.browser.isFirefox||!!DnaUOL.browser.isMozilla){c=false}else{if(DnaUOL.browser.isChrome||parseInt(DnaUOL.browser.version,10)>=42){c=false}else{c=Boolean(navigator.plugins["Silverlight Plug-In"])}}}}catch(d){DnaUOL.Log.debug("Tricks.TrickSupport.sl",d)}return c}};this.Config={cookie:{isDefault:true,async:false,className:"CookieData",supported:a.cookie},window:{isDefault:true,async:false,className:"WindowData",supported:a.window},session:{isDefault:true,async:false,className:"SessionData",supported:a.session},global:{isDefault:true,async:false,className:"GlobalData",supported:a.global},local:{isDefault:true,async:false,className:"LocalData",supported:a.local},user:{isDefault:true,async:false,className:"UserData",supported:a.user},server:{isDefault:true,async:true,className:"ServerData",supported:a.server},etag:{isDefault:true,async:true,className:"EtagData",supported:a.etag},database:{isDefault:true,async:true,className:"DatabaseData",supported:a.database},swf:{isDefault:true,async:true,className:"SwfData",supported:a.swf},sl:{isDefault:false,async:true,className:"SilverLightData",supported:a.sl}};this.CookieData=function(){this.set=function(c){try{document.cookie=(b+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/");document.cookie=(b+"="+c+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/");DnaUOL.Log.debug("CookieData.set",("Setting value ("+c+")"))}catch(d){DnaUOL.Log.error("CookieData.set",d)}};this.get=function(){var c;try{c=DnaUOL.Helpers.getCookie(document.cookie,b);DnaUOL.Log.debug("CookieData.get","Value: "+c)}catch(d){DnaUOL.Log.error("CookieData.get",d)}return this.cacheValue(this,c)}};this.WindowData=function(){this.set=function(c){try{window.name=DnaUOL.Helpers.setUrlParameter(window.name,b,c);DnaUOL.Log.debug("WindowData.set",("Setting value ("+c+")"))}catch(d){DnaUOL.Log.error("WindowData.set",d)}};this.get=function(){var c;try{c=DnaUOL.Helpers.getUrlParameter(window.name,b);DnaUOL.Log.debug("WindowData.get","Value: "+c)}catch(d){DnaUOL.Log.error("WindowData.get",d)}return this.cacheValue(this,c)}};this.SessionData=function(){this.set=function(c){try{sessionStorage.setItem(b,c);DnaUOL.Log.debug("SessionData.set",("Setting value ("+c+")"))}catch(d){DnaUOL.Log.error("SessionData.set",d)}};this.get=function(){var c;try{c=sessionStorage.getItem(b);DnaUOL.Log.debug("SessionData.get","Value: "+c)}catch(d){DnaUOL.Log.error("SessionData.get",d)}return this.cacheValue(this,c)}};this.GlobalData=function(){var c;this.init=function(){try{c=window.document.location.host;if(c.indexOf("www.")==0){c=c.replace("www.","")}}catch(d){DnaUOL.Log.error("GlobalData.init",d)}};this.set=function(d){try{window.globalStorage[c][b]=d;DnaUOL.Log.debug("GlobalData.set",("Setting value ("+d+")"))}catch(f){DnaUOL.Log.error("GlobalData.set",f)}};this.get=function(){var d;try{d=DnaUOL.Helpers.trim(window.globalStorage[c][b]);d=d?d:false;DnaUOL.Log.debug("GlobalData.get","Value: "+d)}catch(f){DnaUOL.Log.error("GlobalData.get",f)}return this.cacheValue(this,d)}};this.LocalData=function(){this.set=function(c){try{window.localStorage.setItem(b,c);DnaUOL.Log.debug("LocalData.set",("Setting value ("+c+")"))}catch(d){DnaUOL.Log.error("LocalData.set",d)}};this.get=function(){var c;try{c=window.localStorage.getItem(b);DnaUOL.Log.debug("LocalData.get","Value: "+c)}catch(d){DnaUOL.Log.error("LocalData.get",d)}return this.cacheValue(this,c)}};this.UserData=function(){var c="dnauol-userdata";this.init=function(){var d=DnaUOL.Helpers.createHtmlElement("div",{html:"dnauol",id:c});d.style.behavior="url(#default#userData)"};this.set=function(f){try{var d=document.getElementById(c);d.setAttribute(b,f);d.save(b);DnaUOL.Log.debug("UserData.set",("Setting value ("+f+")"))}catch(g){DnaUOL.Log.error("UserData.set",g)}};this.get=function(){var f;try{var d=document.getElementById(c);d.load(b);f=d.getAttribute(b);DnaUOL.Log.debug("UserData.get","Value: "+f)}catch(g){f=false;DnaUOL.Log.error("UserData.get",g)}return this.cacheValue(this,f)}};this.ServerData=function(){var c=false;var d=false;this.init=function(){try{DnaUOL.Services.Persistence.serverRequest({callback:function(e){d=e;c=true},error:function(g){d=false;c=true;DnaUOL.Log.debug("ServerData.post",g)}})}catch(f){DnaUOL.Log.error("ServerData.init",f)}};this.set=function(f){try{DnaUOL.Log.debug("ServerData.set",("Setting value ("+f+")"))}catch(g){DnaUOL.Log.error("ServerData.set",g)}};this.get=function(){var e=d;DnaUOL.Log.debug("ServerData.get","Value: "+e);return this.cacheValue(this,e)};this.isReady=function(){return c}};this.EtagData=function(){var d=false;var c=false;this.init=function(){try{DnaUOL.Services.Persistence.etagRequest({callback:function(e){c=e;d=true},error:function(g){c=false;d=true;DnaUOL.Log.debug("EtagData.post",g)}})}catch(f){DnaUOL.Log.error("EtagData.init",f)}};this.set=function(f){try{DnaUOL.Services.Persistence.etagRequest({etag:f});DnaUOL.Log.debug("EtagData.set",("Setting value ("+f+")"))}catch(g){DnaUOL.Log.error("EtagData.set",g)}};this.get=function(){var e=c;DnaUOL.Log.debug("EtagData.get","Value: "+e);return this.cacheValue(this,e)};this.isReady=function(){return d}};this.DatabaseData=function(){var c=false;var d={handler:null,tableName:"dnauol",value:"",queries:[]};d.queries.create=function(e){var g=[];g[g.length]="CREATE TABLE IF NOT EXISTS "+d.tableName+" (";g[g.length]="id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, ";g[g.length]="name TEXT NOT NULL, value TEXT NOT NULL, UNIQUE (name) )";g=g.join("");var h=function(j,k){};var f=function(j,k){};e.executeSql(g,[],h,f)};d.queries.update=function(e,j){var h="INSERT OR REPLACE INTO "+d.tableName+" (name, value) VALUES(?, ?)";var f=[b,j];var k=function(l,m){};var g=function(l,m){};e.executeSql(h,f,k,g)};d.queries.select=function(e){var h="SELECT value FROM "+d.tableName+" WHERE name=?";var f=[b];var j=function(k,l){if(l.rows.length>=1){d.value=l.rows.item(0)["value"]}c=true};var g=function(k,l){c=true};e.executeSql(h,f,j,g)};this.init=function(){try{d.handler=window.openDatabase(b,"",b,1024);d.handler.transaction(function(e){d.queries.select(e)})}catch(f){DnaUOL.Log.error("DatabaseData.init",f)}};this.set=function(f){try{d.handler.transaction(function(e){d.queries.create(e);d.queries.update(e,f);DnaUOL.Log.debug("DatabaseData.set",("Setting value ("+f+")"))})}catch(g){DnaUOL.Log.error("DatabaseData.get",g)}};this.get=function(){var e=d.value;DnaUOL.Log.debug("DatabaseData.get","Value: "+e);return this.cacheValue(this,e)};this.isReady=function(){return c}};this.SwfData=function(){this.init=function(){if(!DnaUOL.swfLib){DnaUOL.swfLib=DnaUOL.Library.get("swf");DnaUOL.swfLib.create()}};this.set=function(c){try{if(typeof DnaUOL.swfLib.handler.setDNA==="function"){DnaUOL.swfLib.handler.setDNA(c);DnaUOL.Log.debug("SwfData.set",("Setting value ("+c+")"))}else{DnaUOL.Log.warning("SwfData.set","swfHandler.setDNA is not a function")}}catch(d){DnaUOL.Log.error("SwfData.set",d)}};this.get=function(){var d;try{var c=(typeof DnaUOL.swfLib.handler.getDNA==="function"?DnaUOL.swfLib.handler.getDNA():false);d=(Boolean(c)?c:false);DnaUOL.Log.debug("SwfData.get","Value: "+d)}catch(f){DnaUOL.Log.error("SwfData.get",f)}return this.cacheValue(this,d)};this.isReady=function(){var c=false;try{if(!DnaUOL.swfLib.handler){DnaUOL.swfLib.createHandler()}if(DnaUOL.swfLib.handler){if(typeof DnaUOL.swfLib.handler.setDNA==="function"){c=true}}}catch(d){DnaUOL.Log.error("SwfData.isReady",d)}return c}};this.SilverLightData=function(){var c=false;var e;var d=function(l){var g=(DnaUOL.appUrl+"/resource/dna.xap");var j="4.0.50826.0";var k=(typeof(l)!="undefined")?('<param name="initParams" value="'+DnaUOL.browser.alias+"="+l+'" />'):"";var n=(typeof(l)!="undefined")?"dnauol-silverlight-set":"dnauol-silverlight-get";var f=(typeof(l)!="string")?'<param name="onLoad"  value="onDnaUOLSlLoad" />':"";var m=(typeof(l)!="string")?'<param name="onError" value="onDnaUOLSlError" />':"";var h=[];h.push('<div style="width:1px;height:1px;overflow:hidden;position:absolute;top:-9999px;left:-9999px;">');h.push("<object id="+n+' width="100%" height="100%" type="application/x-silverlight-2" data="data:application/x-silverlight-2," >');h.push(k);h.push('<param name="source" value="'+g+'" />');h.push('<param name="enableHtmlAccess" value="true" />');h.push(f+m);h.push('<param name="background" value="Transparent" />');h.push('<param name="windowless" value="true" />');h.push('<param name="minRuntimeVersion" value="'+j+'" />');h.push('<param name="autoUpgrade" value="false" />');h.push("</object></div>");h=h.join("");DnaUOL.Helpers.removeHtmlElement(n+"-wrapper");DnaUOL.Helpers.createHtmlElement("div",{id:(n+"-wrapper")}).innerHTML=h};this.init=function(){try{window.onDnaUOLSlLoad=function(h,g){var k=document.getElementById("dnauol-silverlight-get");if(k){try{DnaUOL.controlSilverLight=k.Content.App.getIsolatedStorage(DnaUOL.browser.alias);e=DnaUOL.controlSilverLight}catch(j){DnaUOL.Log.debug("SilverLightData.onDnaUOLSlLoad",j);DnaUOL.controlSilverLight=false}}else{DnaUOL.Log.debug("SilverLightData.onDnaUOLSlLoad","Cant use silverlight control handler")}c=true};window.onDnaUOLSlError=function(h,g){DnaUOL.controlSilverLight=false;c=true};window.dbg=function(g){};d()}catch(f){DnaUOL.Log.error("SilverLightData.init",f)}};this.get=function(){return this.cacheValue(this,e)};this.set=function(f){try{d(f);DnaUOL.Log.debug("SilverLightData.set",("Setting value ("+f+")"))}catch(g){DnaUOL.Log.error("SilverLightData.set",g)}};this.isReady=function(){return c}}};var DnaUOL=DnaUOL||{};DnaUOL.Persistence=new function(){var b=new DnaUOL.PersistenceTricks();var c=new function(){this.asyncInterval=DnaUOL.Config.get("asyncInterval");this.maxAsyncAttempts=DnaUOL.Config.get("maxAsyncAttempts");this.createTrick=function(f){var d;var e=b.Config[f];if(e.supported()){d=new b[e.className]();d.ready=false;d.cacheValue=function(h,j){var g=false;if(typeof j==="string"&&Boolean(DnaUOL.Helpers.trim(String(j)))){g=new DnaUOL.PersistedValue();g.setAttributes(j)}h.cache=g}}else{d={};d.unsupported=true;d.ready=true;DnaUOL.Log.debug("Unsupported persistence",("type ("+f+")"))}d.className=e.className;d.cache=false;d.timeout=false;return d};this.getTrickValue=function(d){return d.cache};this.factory=function(g){var d=[];var g=(typeof g==="object"?g:{});for(var f in b.Config){try{if(this.trickFilter(g[f],b.Config[f].isDefault)){d[f]=this.createTrick(f)}else{DnaUOL.Log.debug("TricksHelper.factory",("Persistence type ("+f+")  will not be used"))}}catch(h){DnaUOL.Log.error("TricksHelper.factory",h)}}return d};this.trickFilter=function(f,e){var d=false;if(typeof f==="boolean"){d=f}else{if(typeof f==="undefined"&&e){d=true}else{if(typeof f==="undefined"&&!e){d=false}}}return d};this.checkAsyncTrick=function(f,h,g){var e=f.tricks[h];if(g){e.asyncCheck++}else{e.asyncCheck=0}var d=Boolean(e.asyncCheck>=this.maxAsyncAttempts);if(e.isReady()||d){e.get();e.ready=true;if(d){e.timeout=true;DnaUOL.Log.debug("checkAsyncTrick",("Timeout ("+h+")"))}else{DnaUOL.Log.debug("checkAsyncTrick",(h+" ready, attempt "+e.asyncCheck))}}else{setTimeout(function(){c.checkAsyncTrick(f,h,true)},this.asyncInterval)}};this.isAllTricksReady=function(f,g){var e=true;for(var d in f.tricks){if(!f.tricks[d].ready){e=false}}if(e){g()}else{setTimeout(function(){c.isAllTricksReady(f,g)},this.asyncInterval)}};this.getSummary=function(g){var d=[];try{for(var f in g.tricks){var h=this.getTrickValue(g.tricks[f]);if(typeof h==="object"){d[f]=h.getUid()}else{if(g.tricks[f].unsupported){d[f]=false}else{d[f]=null}}}}catch(j){DnaUOL.error("Persistence.getSummary",j)}return d};this.persistData=function(e,f,g){for(var d in e.tricks){if(e.tricks[d].get){if(typeof e.tricks[d].init==="function"&&!e.tricks[d].ready){e.tricks[d].init()}if(b.Config[d].async){e.tricks[d].ready=false;this.checkAsyncTrick(e,d)}else{e.tricks[d].ready=true;e.tricks[d].get()}}}this.isAllTricksReady(e,function(){c.fillTricks(e,f);g(c.getSummary(e))})};this.fillTricks=function(e,g){var f=g.getString();if(f){DnaUOL.Log.debug("Persistence.fillTricks","Fill tricks ("+f+")");for(var d in e.tricks){if(!e.tricks[d].unsupported){e.tricks[d].set(f)}}}else{DnaUOL.Log.debug("Persistence.fillTricks","Value not set")}}};var a=function(m,l){var k=[],e=false,n=0,d=false;var j=function(){if(!d){d=true;if(typeof e==="object"){DnaUOL.Log.debug("getPersistedData","First persisted data retrieved, "+e.getLogString())}else{DnaUOL.Log.debug("getPersistedData","No persistent data found")}l(e)}};var h=function(){try{for(var o in m.tricks){if(m.tricks[o].get){if(!b.Config[o].async){if(typeof m.tricks[o].init==="function"&&!m.tricks[o].ready){m.tricks[o].init()}m.tricks[o].ready=true;m.tricks[o].get();var p=c.getTrickValue(m.tricks[o]);if(p){e=p;DnaUOL.Log.debug("getPersistedData","First persisted data index ( "+o+" )")}}else{k.push(o)}}if(e){break}}}catch(q){DnaUOL.Log.error("getPersistedData.trySyncTricks",q)}return e};var f=function(){try{var s=true;for(var o in k){var r=k[o];if(m.tricks[r].ready){var p=c.getTrickValue(m.tricks[r]);if(p){e=p;DnaUOL.Log.debug("getPersistedData","First persisted data index ( "+r+" )")}}else{s=false}}if(e||s){j()}else{setTimeout(function(){n++;f()},c.asyncInterval)}}catch(q){DnaUOL.Log.error("getPersistedData.tryAsyncTricks",q);j()}};var g=function(){try{for(var o in k){var q=k[o];if(m.tricks[q].get){m.tricks[q].ready=false;if(typeof m.tricks[q].init==="function"){m.tricks[q].init()}c.checkAsyncTrick(m,q)}}f()}catch(p){DnaUOL.Log.error("getPersistedData.startAsyncTricks",p);j()}};this.get=function(){if(h()){j()}else{g()}}};this.handler=function(e){var d={};d.tricks=c.factory(e);d.getPersistedData=function(g){var f=new a(d,g);f.get()};d.persistData=function(f,g){c.persistData(d,f,g)};return d}};var DnaUOL=DnaUOL||{};DnaUOL.Main=new function(){var a=function(g,j){var h=(typeof j.sess=="string"?j.sess:"");var k=new DnaUOL.Persistence.handler(j.filter);k.getPersistedData(function(o){g.register("persisted",o,"Get persisted data");var t=Boolean(j.forceUpdate)?true:false;var m=(typeof j.detectDeviceData=="boolean"?j.detectDeviceData:true);var v=true,l=false,x=false,u=false;if(typeof o=="object"&&o){v=g.hasExpired(o.getLastUpdate(),j.updateFrequency);l=Boolean(o.getUid());x=!isNaN(o.getLastUpdate().valueOf());u=Boolean(o.getDetectionFlag())}DnaUOL.Log.debug("Main","hasDetectionFlag ("+u+") ");var p=Boolean((!l)||(!x)||t||v||(m&&!u));var q=function(z){if(z){DnaUOL.Log.debug("Main","Update NOT needed, UID ( "+o.getUid()+" ), last update ( "+o.getLastUpdate()+" )");DnaUOL.Services.simpleRequest({uid:o.getUid(),sess:h,startTime:b})}s()};var n=function(z){if(z){g.register("update",z,"Get value to persist from service callback");z.setDetectionFlag(m);k.persistData(z,function(A){g.register("summary",A,"Data persisted");s()})}else{s()}};var s=function(){g.finalize(j.callback)};var w=function(z){if(l){DnaUOL.Log.debug("Main","Updating data, UID ( "+o.getUid()+" ), last update ( "+o.getLastUpdate()+" )");DnaUOL.Services.DeviceId.update({sess:h,startTime:b,data:o,detections:z,callback:n})}else{DnaUOL.Log.debug("Main","Creating UID...");DnaUOL.Services.DeviceId.create({sess:h,startTime:b,detections:z,callback:n,})}};if(m&&p){var r=(typeof j.addDetections=="object"?j.addDetections:false);var y=new DnaUOL.DeviceData(r);y.get(function(z){g.register("detections",z,"Device data detection done");w(z)})}else{if(p){w(false)}else{q(m)}}})};var d=function(){var l={};var h=0;var j=new Date();var g=DnaUOL.Config.get("environment");var k=function(){var m={uid:false,lastUpdate:false,updated:false};try{if(l.update){m.uid=l.update.getUid();m.lastUpdate=l.update.getLastUpdate();m.updated=l.summary?true:false;DnaUOL.updateData=l.summary?l.summary:false}else{if(l.persisted){m.uid=l.persisted.getUid();m.lastUpdate=l.persisted.getLastUpdate()}}DnaUOL.logResult=DnaUOL.Log.getData()}catch(n){DnaUOL.Log.error("Main.StepsHelper.getResult",n)}return m};this.register=function(n,p,r){try{l[n]=p;var m=new Date();var o=(m-j);j=m;h++;DnaUOL.Log.debug("Main.StepsHelper.register","Step "+h+" ( "+r+" ), ellapsed time "+o)}catch(q){DnaUOL.Log.error("Main.StepsHelper.register",q)}};this.hasExpired=function(m,s){var u=false;try{if(typeof m=="object"&&m){var t;var q=parseInt(Math.round(s),10);if(!isNaN(q)&&q<=DnaUOL.Config.get("maxUpdateFrequency")){t=q;DnaUOL.Log.debug("Main.StepsHelper.hasExpired","Update frequency ("+t+"), param("+s+")")}else{t=DnaUOL.Config.get("updateFrequency");DnaUOL.Log.debug("Main.StepsHelper.hasExpired","Update frequency (default: "+t+"), param("+s+")")}var p=(parseInt(t)*24*60*60*1000);var o=new Date(m.getTime()+p);var n=new Date();u=Boolean(o.getTime()<=n.getTime())}}catch(r){DnaUOL.Log.error("Main.StepsHelper.hasExpired",r)}return u};this.finalize=function(m){setTimeout(function(){DnaUOL.Helpers.removeHtmlWrapper()},1000);DnaUOL.Log.commit();if(typeof m=="function"){m(k())}}};var f=function(j,h){var g=new d();if(j){a(g,h)}else{DnaUOL.Log.error("DnaUOL.Main.init","Dependencies load timeout");g.finalize(h.callback)}};var e=function(n){var p=0;var g=DnaUOL.Config.get("asyncInterval");var q=DnaUOL.Config.get("maxAsyncAttempts");var l=function(){return DnaUOL.Helpers.hasJQuery()};var o=function(){DnaUOL.Helpers.jQuerySupport()};var m=function(){n(true)};var k=function(){n(false)};var j=function(){if(p<=q){if(l()){DnaUOL.Log.debug("DnaUOL.Main.init","Dependencies loaded");m()}else{setTimeout(function(){j();p++},g)}}else{k()}};var h=function(){if(l()){m()}else{DnaUOL.Log.debug("DnaUOL.Main.init","Dependencies are NOT prepared");o();j()}}()};var c=function(){DnaUOL.browser=DnaUOL.Helpers.getBrowser();DnaUOL.Log.begin(DnaUOL.Config.get("logLevel"))}();var b;this.run=function(h){b=(Date.now)?Date.now():+new Date;var g=(typeof h=="object"?h:{});if(!!DnaUOL.Helpers.getCookie(document.cookie,"DNA")&&!!!DnaUOL.Helpers.getCookie(document.cookie,"DNA").match(/[0-9a-fA-F]{32}/)){g.forceUpdate=true}e(function(j){f(j,g)})}};DnaUOL.run=function(a){DnaUOL.Main.run(a)};