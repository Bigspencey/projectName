(function(){function TypeValidator(){var $public=this;var $static=$public.constructor.prototype;$static.isString=function(value){return value!==null&&(typeof value)==="string";};$static.isArray=function(value){return value!==null&&value instanceof Array;};$static.isObject=function(entity){return entity&&entity.constructor===Object;};$static.isFunction=function(value){return value!==null&&value instanceof Function;};return $public;}function Logs(){var $private={};var $protected=this;var $public=$protected.constructor.prototype;$private.prefix="[UOLPD.TagManager.UolDna] ";$public.history={};$private.getQueryString=function(name,query){if(name===undefined){return;}if(typeof name!=="string"){return;}if(typeof query!=="undefined"&&typeof query!=="string"){return;}var search=query||document.location.search;var length=search.length;var value;search=search.split(/\?|\&/);length=search.length;for(var i=0;i<length;i++){if(search[i].split("=")[0]==name){value=search[i].split("=")[1];break;}}return value;};$private.isActive=function(query){return($private.getQueryString("tm",query)=="debug"?true:false);};$private.setHistory=function(fn,msg){if(!fn||!msg){return;}if((typeof fn)!=="string"||(typeof msg)!=="string"){return;}$public.history[fn]=$public.history[fn]||[];$public.history[fn].push(msg);};$private.trim=function(string){if(string===undefined){return;}if(typeof string!=="string"){return;}string=string.replace(/^(\s+)|(\s+)$/gm,"");string=string.replace(/\s+/gm," ");if(string.length===0){return;}return string;};$private.formatMessage=function(msg){msg=$private.trim(msg);if(!msg||!$private.prefix){return;}msg=$private.prefix+msg;return msg;};$private.validateFunction=function(fn,msg){if(!fn){return false;}if(!window.console||!console){$private.setHistory(fn,msg);return false;}if(!console[fn]&&fn=="log"){$private.setHistory(fn,msg);return false;}if(!fn||!console[fn]){$private.setHistory(fn,msg);fn="log";}return fn;};$private.print=function(msg,fn,isActive){if(msg===undefined||fn===undefined){return;}if(typeof msg!=="string"||typeof fn!=="string"){return;}msg=$private.formatMessage(msg);if(!msg){return;}if(isActive===undefined){isActive=$private.isActive();}if(typeof isActive!=="boolean"){return;}if(isActive===false){$private.setHistory(fn,msg);return;}fn=$private.validateFunction(fn,msg);if(!fn){return;}if(console[fn]){console[fn](msg);}$private.setHistory(fn,msg);return msg;};$public.warn=function(msg,isActive){return $private.print(msg,"warn",isActive);};$public.error=function(msg,isActive){return $private.print(msg,"error",isActive);};$public.info=function(msg,isActive){return $private.print(msg,"info",isActive);};$public.debug=function(msg,isActive){return $private.print(msg,"debug",isActive);};$public.log=function(msg,isActive){return $private.print(msg,"log",isActive);};$public.getInnerMethods=function(method){return $private[method];};return $protected;}function NameSpace(packageName){var $private={};var $public=this;var $static=$public.constructor.prototype;$private.version="1.0.69";$private.validator=new TypeValidator();$static.init=function(packageName){if($private.validator.isString(packageName)){return $static.create(packageName);}};$static.create=function(packageName){$private.createUOLPD();$private.createTagManager();return $private.createPackage(packageName);};$private.createUOLPD=function(){if(!$private.validator.isObject(window.UOLPD)){window.UOLPD={};}};$private.createTagManager=function(){if(!$private.validator.isObject(UOLPD.TagManager)&&!$private.validator.isFunction(UOLPD.TagManager)&&typeof UOLPD.TagManager!=="object"){UOLPD.TagManager={};}};$private.createPackage=function(packageName){if(!$private.validator.isObject(UOLPD.TagManager[packageName])){UOLPD.TagManager[packageName]={};}UOLPD.TagManager[packageName].version=$private.version;if(!$private.validator.isArray(UOLPD.TagManager[packageName].config)){UOLPD.TagManager[packageName].config=[];}if(!$private.validator.isObject(UOLPD.TagManager[packageName].log)){UOLPD.TagManager[packageName].log=new Logs();}return UOLPD.TagManager[packageName];};return $static.init(packageName);}function IframeCreator(){var $private={};var $public=this;$private.iframesrc=/^(http(?:s)?:)?(file:)?\/\/tm.uol.com.br\/uoldna.html(\/)?$/;$private.logs=new Logs();$public.init=function(){if($private.isIframeInPage()){$private.logs.warn("Iframe with the same src already exists");return false;}if(Math.random()*100<=90){$private.makeIframe();return true;}return false;};$private.bodyAppendChild=function(child){document.body.appendChild(child);};$private.waitForBodyPresent=function(iframe){var waitInterval=window.setInterval(function(){if(document.body){window.clearInterval(waitInterval);$private.bodyAppendChild(iframe);}},100);};$private.makeIframe=function(){var iframe=document.createElement("iframe");iframe.style.display="none";iframe.setAttribute("src","//tm.uol.com.br/uoldna.html");if(document.body){$private.bodyAppendChild(iframe);}else{$private.waitForBodyPresent(iframe);}};$private.isIframeInPage=function(){var iframes=document.getElementsByTagName("iframe");for(var i=0;i<iframes.length;i++){var test=$private.iframesrc.test(iframes[i].src);if(test){return true;}}return false;};return $public;}var nameSpace=new NameSpace("DNA");var iframeCreator=new IframeCreator();var config=nameSpace.config;nameSpace.init=iframeCreator.init;var interval=setInterval(function(){if(document.readyState&&document.readyState=="complete"){clearInterval(interval);for(var i=0;i<config.length;i++){nameSpace.init();}}},100);})();